{% extends 'base.html' %}
{% load static %}

{% block title %}TASKS - Lista{% endblock %}

<body>
{% block contenido %}
    <div class="row align-items-center">
        <div class="col-10 d-flex justify-content-left py-3">
            <h3>Bienvenid@ a tu lista de tareas, {{ user.username }}</h3>
        </div>
        <div class="col-2">
            <button class="btn btn-success" type="submit"><a href="{%url 'task_list' %}" class="text-reset">Nueva Tarea</a></button>
        </div>
    </div>

    <form method="POST">
        <div class="row align-items-center">
            <div class="col-4 d-flex justify-content-left py-3">
                {% comment %} <select name="filter_by" id="id_filter_by" class="form-select" required>
                    <option value="Pendiente">Pendiente</option>
                    <option value="En proceso">En proceso</option>
                    <option value="Completada">Completada</option>
                </select> {% endcomment %}
                    {% csrf_token %}
                    <select name="filter_by" class="form-select" aria-label="Default select example">
                        <option selected="selected" disabled>Filtrar tareas por estado</option>
                        <option value="Pendiente">Pendiente</option>
                        <option value="En proceso">En proceso</option>
                        <option value="Completada">Completada</option>
                    </select>
            </div>
            <div class="col">
                <input type="submit" class="btn btn-primary" value="Filtrar"></input>
                {% comment %} <a href="{%url 'task_list'%}" class="btn btn-primary" type="submit" role="button">Filtrar</a> {% endcomment %}
                <a href="{%url 'task_list'%}" class="btn btn-primary" role="button">Borrar filtro</a>
            </div>
        </form>
    </div>
    <div class="d-flex justify-content-center">
        <div class="card w-100">
            <div class="card-body">
                <div class="row">
                    <div class="col-4 fw-bold">
                        <span>Título de la tarea</span>
                    </div>
                    <div class="col-4 fw-bold">
                        <span>Fecha de vencimiento</span>
                    </div>
                    <div class="col-2 fw-bold">
                        <span>Etiqueta</span>
                    </div>
                    <div class="col-2 fw-bold">
                        <span>Ver detalles</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% for task in tasks %}
    <div class="row">
        <div class="d-flex justify-content-left">
            <div class="card w-100">
                <div class="card-body">
                    <div class="row">
                        {% if task.completed %}
                            <div class="col-4 fw-bold text-decoration-line-through">
                        {% else %}
                            <div class="col-4 fw-bold">
                        {% endif %}
                        <a href="{% url 'task_list' %}" class="text-reset">{{ task.title }}</a>
                    </div>
                    <div class="col-4">
                        <i class="fa fa-calendar"></i>{{task.due_date}}
                    </div>
                    <div class="col-2">
                        <span class="badge text-bg-primary">{{ task.tag }}</span>
                    </div>
                    <div class="col-2">
                        <a href="{% url 'task_details' task.id %}" role="button" class="btn btn-success"><i class="fa fa-circle-info"></i> Detalles</a> 
                    </div>
                </div>
                </div>
            </div>
        </div>
    </div>
    {% empty %}
        <h4>No hay tareas pendientes. ¡Agrega una nueva tarea!</h4>
    {% endfor %}
{% endblock %} 
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
</body>